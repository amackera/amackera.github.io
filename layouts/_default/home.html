{{ define "main" }}
  <main aria-role="main">
    <header class="home-page-header">
      <!-- <h1>{{ .Title }}</h1> -->
      {{ with .Params.subtitle }}
        <span class="subtitle">{{ . }}</span>
      {{ end }}
    </header>
    <div class="home-page-content">
      <!-- Note that the content for index.html, as a sort of list page, will pull from content/_index.md -->
      {{ .Content }}
    </div>
    {{ with site.Params.social }}
    <div class="social-icons">
      {{- range . }}
      <a href="{{ trim .url " " | safeURL }}" target="_blank"
         rel="noopener noreferrer me"
         title="{{ (.title | default .name) | title }}">
        {{ partial "svg.html" . }}
      </a>
      {{- end }}
    </div>

  <!-- Minimized chat button -->
  <button id="chat-toggle" style="
    position: fixed;
    bottom: 20px;
    right: 20px;
    width: 60px;
    height: 60px;
    border-radius: 50%;
    background: #0084ff;
    border: none;
    cursor: pointer;
    box-shadow: 0 4px 12px rgba(0,0,0,0.15);
    z-index: 9999;
    display: flex;
    align-items: center;
    justify-content: center;
    color: white;
    font-size: 24px;
    transition: transform 0.2s;
  " onmouseover="this.style.transform='scale(1.1)'" onmouseout="this.style.transform='scale(1)'">
    ðŸ’¬
  </button>

  <!-- Chat widget (hidden by default) -->
  <div id="chat-widget" style="
    position: fixed;
    bottom: 20px;
    right: 20px;
    width: 400px;
    height: 600px;
    display: none;
    flex-direction: column;
    border-radius: 10px;
    box-shadow: 0 4px 12px rgba(0,0,0,0.15);
    z-index: 9999;
    background: white;
  ">
    <!-- Close button -->
    <button id="chat-close" style="
      position: absolute;
      top: 10px;
      right: 10px;
      background: transparent;
      border: none;
      font-size: 24px;
      cursor: pointer;
      z-index: 10000;
      color: #666;
    ">Ã—</button>

    <!-- Iframe -->
    <iframe
      src="http://localhost:4000/embed/chat/c4c-6569"
      style="
        width: 100%;
        height: 100%;
        border: none;
        border-radius: 10px;
      "
    ></iframe>
  </div>

  <script>
    const toggleBtn = document.getElementById('chat-toggle');
    const closeBtn = document.getElementById('chat-close');
    const widget = document.getElementById('chat-widget');

    toggleBtn.addEventListener('click', () => {
      toggleBtn.style.display = 'none';
      widget.style.display = 'flex';
    });

    closeBtn.addEventListener('click', () => {
      widget.style.display = 'none';
      toggleBtn.style.display = 'flex';
    });
  </script>
{{ end }}
  </main>
{{ end }}
